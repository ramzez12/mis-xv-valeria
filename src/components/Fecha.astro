---
// FechaEvento.astro
---

<section class="py-2 px-4 relative overflow-hidden">
  <div class="max-w-2xl mx-auto text-center">
    
    <!-- ðŸ¦‹ GIF ROSADO - Arriba Izquierda (POSICIÃ“N ORIGINAL) -->
    <div 
      id="gif-verde-1" 
      class="absolute left-4 top-4 z-10"
    >
      <img
        src="/gif/rosado.gif"
        alt="Mariposa rosada"
        class="w-40 h-40 sm:w-16 sm:h-16 md:w-20 md:h-20 object-contain"
      />
    </div>

   
    <!-- ðŸ¦‹ GIF VERDE - Arriba Derecha (POSICIÃ“N ORIGINAL) -->
    <div 
      id="gif-rosado-1" 
      class="absolute right-4 top-0 z-10"
    >
      <img
        src="/gif/verde.gif"
        alt="Mariposa verde"
        class="w-40 h-40 sm:w-16 sm:h-16 md:w-20 md:h-20 object-contain transform scale-x-[-1]"
      />
    </div>

    <!-- Texto "AcompÃ¡Ã±anos este dÃ­a tan especial" -->
    <div class="mb-4 mt-12" id="texto-invitacion-container">
      <div class="flex items-center justify-center gap-4 sm:gap-6 md:gap-8 px-4">
        <!-- TEXTO CENTRAL - TAMAÃ‘O AUMENTADO -->
        <div id="texto-invitacion" class="flex-shrink-0 pt-20">
          <p
            class="font-charm text-2xl sm:text-3xl md:text-4xl text-[#D4AF37] italic leading-relaxed text-center"
          >
            AcompÃ¡Ã±anos este dÃ­a<br />tan especial
          </p>
        </div>
      </div>
    </div>

    <!-- Fecha con lÃ­neas arriba y abajo -->
    <div class="relative max-w-md mx-auto" id="fecha-evento">
      <div class="flex items-center justify-center gap-4 md:gap-6">
        <!-- SÃBADO con lÃ­neas arriba y abajo - ANCHO FIJO -->
        <div class="flex flex-col items-center w-24 md:w-28">
          <div class="w-full h-px bg-[#D4AF37] mb-2"></div>
          <span
            class="font-charm text-xl md:text-lg text-[#eb8fa3] uppercase tracking-wider font-bold text-center"
            >VIERNES</span
          >
          <div class="w-full h-px bg-[#D4AF37] mt-2"></div>
        </div>

        <!-- NÃºmero 24 - CENTRADO -->
        <div
          class="flex items-center justify-center min-w-[80px] md:min-w-[100px]"
        >
          <span class="font-charm text-7xl md:text-8xl text-[#D4AF37] font-bold -ml-1"
            >16</span
          >
        </div>

        <!-- ENERO con lÃ­neas arriba y abajo - ANCHO FIJO -->
        <div class="flex flex-col items-center w-24 md:w-28">
          <div class="w-full h-px bg-[#D4AF37] mb-2"></div>
          <span
            class="font-charm text-xl md:text-lg text-[#eb8fa3] uppercase tracking-wider font-bold text-center"
            >ENERO</span
          >
          <div class="w-full h-px bg-[#D4AF37] mt-2"></div>
        </div>
      </div>

      <!-- AÃ±o - MOVIDO CON TRANSLATE -->
      <div class="mt-2 flex justify-center" id="anio-evento">
        <p class="font-charm text-3xl md:text-4xl text-[#eb8fa3] font-bold -translate-x-2">2026</p>
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  if (typeof window !== "undefined") {
    document.addEventListener("DOMContentLoaded", () => {
      console.log("ðŸ¦‹ Iniciando animaciones con movimiento vertical...");

      // ðŸŽ¯ ESTADO INICIAL - Todo oculto con movimiento vertical
      // GIFs de arriba suben (-30), contenido baja (+30)
      gsap.set("#gif-verde-1, #gif-rosado-1", { opacity: 0, y: -30 });
      gsap.set("#texto-invitacion", { opacity: 0, y: 30 });
      gsap.set("#fecha-evento", { opacity: 0, y: 30 });
      gsap.set("#anio-evento", { opacity: 0, y: 30 });

      // âœ¨ SCROLL TRIGGER con entrada y salida
      ScrollTrigger.create({
        trigger: "#texto-invitacion-container",
        start: "top 100%", // Cuando toca el borde inferior de la ventana
        end: "top 20%",    // Desaparece cuando llega al 20% superior
        
        onEnter: () => {
          console.log("ðŸ¦‹ Componente apareciendo...");
          animarEntrada();
        },

        onLeaveBack: () => {
          console.log("ðŸ¦‹ Componente desapareciendo...");
          animarSalida();
        },
      });

      // ðŸ“¥ ANIMACIÃ“N DE ENTRADA (TODO AL MISMO TIEMPO)
      function animarEntrada() {
        const tl = gsap.timeline();

        // GIFS SUPERIORES (vienen desde arriba)
        tl.to("#gif-verde-1, #gif-rosado-1", {
          opacity: 1,
          y: 0,
          duration: 0.8,
          ease: "power2.out",
        })
        // TEXTO - AL MISMO TIEMPO (viene desde abajo)
        .to("#texto-invitacion", {
          opacity: 1,
          y: 0,
          duration: 1,
          ease: "power2.out",
        }, "<") // â† SimultÃ¡neo
        // FECHA - AL MISMO TIEMPO (viene desde abajo)
        .to("#fecha-evento", {
          opacity: 1,
          y: 0,
          duration: 1,
          ease: "power2.out",
        }, "<") // â† SimultÃ¡neo
        // AÃ‘O - AL MISMO TIEMPO (viene desde abajo)
        .to("#anio-evento", {
          opacity: 1,
          y: 0,
          duration: 1,
          ease: "power2.out",
        }, "<"); // â† SimultÃ¡neo

        // ðŸ¦‹ FLOTADO DESPUÃ‰S DE LA ENTRADA
        gsap.to("#gif-verde-1", {
          y: -8,
          rotation: 3,
          duration: 4.0,
          ease: "sine.inOut",
          yoyo: true,
          repeat: -1,
          delay: 0.8,
        });

        gsap.to("#gif-rosado-1", {
          y: -8,
          rotation: -3,
          duration: 4.2,
          ease: "sine.inOut",
          yoyo: true,
          repeat: -1,
          delay: 1.0,
        });
      }

      // ðŸ“¤ ANIMACIÃ“N DE SALIDA (secuencial, de abajo hacia arriba)
      function animarSalida() {
        const tl = gsap.timeline();

        // Contenido desaparece primero (hacia abajo)
        tl.to("#anio-evento", {
          opacity: 0,
          y: 30,
          duration: 0.4,
          ease: "power2.in",
        })
        .to("#fecha-evento", {
          opacity: 0,
          y: 30,
          duration: 0.4,
          ease: "power2.in",
        }, "-=0.3")
        .to("#texto-invitacion", {
          opacity: 0,
          y: 30,
          duration: 0.4,
          ease: "power2.in",
        }, "-=0.3")
        // GIFs desaparecen al final (hacia arriba)
        .to("#gif-verde-1, #gif-rosado-1", {
          opacity: 0,
          y: -30,
          duration: 0.4,
          ease: "power2.in",
        }, "-=0.3");
      }

      console.log("ðŸŽ‰ Animaciones verticales listas!");
    });
  }
</script>

<style>
  /* Evitar scroll horizontal */
  section {
    position: relative;
    overflow-x: hidden;
    min-height: 400px;
  }
</style>
<section class="py-8 px-4 relative">
  <div class="max-w-3xl mx-auto">
    
    <div class="flex justify-center mb-3" id="flores-arriba-ded">
      <img
        src="/imagenes/FlorSeparador.webp"
        alt="Flores decorativas superiores"
        class="w-48 sm:w-56 md:w-64 lg:w-72 h-auto object-contain"
      />
    </div>

    <div class="text-center px-4">
      <h2
        class="font-charm text-xl sm:text-xl md:text-2xl text-[#eb8fa3] leading-relaxed"
        id="texto-ded"
      >
        Los sue√±os se cumplen y hoy uno de los m√≠os se hace realidad. Con la
        bendici√≥n de Dios y el amor de mi familia, te invito a celebrar mis 15
        a√±os.
      </h2>
    </div>

    <div class="flex justify-center mt-3" id="flores-abajo-ded">
      <img
        src="/imagenes/FlorSeparador.webp"
        alt="Fores decorativas inferiores"
        class="w-48 sm:w-56 md:w-64 lg:w-72 h-auto object-contain scale-y-[-1]"
      />
    </div>

  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    console.log("üíê Iniciando animaciones de dedicatoria...");

    // Estado inicial - Todo oculto
    // Las flores de arriba se van hacia arriba (-30), el texto y las flores de abajo hacia abajo (+30)
    gsap.set("#flores-arriba-ded", { opacity: 0, y: -30 });
    gsap.set("#texto-ded", { opacity: 0, y: 30 });
    gsap.set("#flores-abajo-ded", { opacity: 0, y: 30 });

    // ScrollTrigger con entrada y salida
    ScrollTrigger.create({
      trigger: "#texto-ded",
      start: "top 100%", // Cuando el trigger toca el borde inferior de la ventana
      end: "top 20%", // Desaparece cuando el trigger llega al 20% superior de la ventana
      
      onEnter: () => {
        console.log("üíê Dedicatoria apareciendo...");
        animarEntrada();
      },

      onLeaveBack: () => {
        console.log("üíê Dedicatoria desapareciendo...");
        animarSalida();
      },
    });

    // ANIMACI√ìN DE ENTRADA (ahora todos al mismo tiempo)
    function animarEntrada() {
      const tl = gsap.timeline();

      // INICIAMOS LA ANIMACI√ìN DE LA FLOR SUPERIOR
      tl.to("#flores-arriba-ded", {
        opacity: 1,
        y: 0,
        duration: 0.8,
        ease: "power2.out",
      })
      // AL MISMO TIEMPO (usando "<") animamos el TEXTO
      .to("#texto-ded", {
        opacity: 1,
        y: 0,
        duration: 1,
        ease: "power2.out",
      }, "<") // <-- ¬°CLAVE! Esto hace que inicie al mismo tiempo que la animaci√≥n anterior.
      // AL MISMO TIEMPO (usando "<") animamos la FLOR INFERIOR
      .to("#flores-abajo-ded", {
        opacity: 1,
        y: 0,
        duration: 0.8,
        ease: "power2.out",
      }, "<"); // <-- ¬°CLAVE! Esto hace que inicie al mismo tiempo que la animaci√≥n anterior.
    }

    // ANIMACI√ìN DE SALIDA (se mantiene secuencial como estaba, desapareciendo de abajo hacia arriba)
    function animarSalida() {
      const tl = gsap.timeline();

      // Todo desaparece r√°pido
      tl.to("#flores-abajo-ded", {
        opacity: 0,
        y: 30,
        duration: 0.4,
        ease: "power2.in",
      })
      .to("#texto-ded", {
        opacity: 0,
        y: 30,
        duration: 0.4,
        ease: "power2.in",
      }, "-=0.3")
      .to("#flores-arriba-ded", {
        opacity: 0,
        y: -30,
        duration: 0.4,
        ease: "power2.in",
      }, "-=0.3");
    }
  });
</script>